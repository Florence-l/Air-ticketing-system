<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>我的</title>
    <link rel="stylesheet" th:href="@{layui/css/layui.css}">
    <script type="text/javascript" src="/js/jquery-1.8.3.min.js"></script>
    <link type="text/css" rel="stylesheet" href="/css/jqstyle.css"/>
</head>
<body>
<th:block th:include="common.html :: header"></th:block>
<th:block th:include="mineside.html :: side"></th:block>
<div style="position: relative;margin-left: 200px;width: auto">
    <div style="padding: 15px;">

        <fieldset class="layui-elem-field layui-field-title" style="margin-top: 30px;">
            <legend>全部订单</legend>
        </fieldset>
        <div class="layui-low">
            <table class="layui-hide" id="orderList"></table>
        </div>
    </div>

</div>
<!--<th:block th:include="common.html :: footer"></th:block>-->


<script th:src="@{layui/layui.js}"></script>
<script th:inline="none">
layui.use(['table'], function(){
  var table = layui.table;//使用数据表格

  table.render({
    elem: '#orderList'
    ,height: 500
    ,url: 'orderAll' //数据接口
    ,limit: 10
    ,limits: [10, 20, 30, 50]
    ,page: true //开启分页
    ,cols: [[ //表头
      {field: 'order_num', title: '订单号', width:150,  fixed: 'left'}
      ,{field: 'user_name', title: '乘客姓名', width:100}
      ,{field: 'seat_id', title: '座位号', width: 90}
      ,{templet:'<div>{{d.flight.departurecity}}</div>', title: '出发城市', width: 100}
      ,{templet:'<div>{{d.flight.arrivalcity}}</div>', title: '到达城市', width: 100}
      ,{templet:'<div>{{d.flight.date}}</div>', title: '日期', width: 130}
      ,{templet:'<div>{{d.flight.departuretime}}</div>', title: '出发时间', width: 130}
      ,{field: 'realPrice', title: '全部金额', width: 135}
      ,{field:'is_valid', width:8+'%', title: '订单状态',

templet:function(d){
if(d.is_valid ==1)
return '已失效'
else if(d.paymentStatus == 1)
return '已支付'
else
return '未支付';
}
}
    ]]
  });

});

</script>
<script>
//JS
layui.use(['element', 'layer', 'util'], function(){
  var element = layui.element
  ,layer = layui.layer
  ,util = layui.util
  ,$ = layui.$;

  //头部事件
  util.event('lay-header-event', {
    //左侧菜单事件
    menuLeft: function(othis){
      layer.msg('展开左侧菜单的操作', {icon: 0});
    }
    ,menuRight: function(){
      layer.open({
        type: 1
        ,content: '<div style="padding: 15px;">处理右侧面板的操作</div>'
        ,area: ['260px', '100%']
        ,offset: 'rt' //右上角
        ,anim: 5
        ,shadeClose: true
      });
    }
  });

});
</script>
</body>
</html>